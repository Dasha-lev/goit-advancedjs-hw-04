{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet lightbox = null;\n\nfunction handleError(message) {\n  iziToast.show({\n    message: message,\n    position: 'topRight',\n    timeout: 4000,\n    backgroundColor: '#EF4040',\n    messageColor: '#FAFAFB',\n    iconUrl: './assets/icons/close-icon.svg',\n    closeOnClick: true,\n  });\n}\n\nfunction clearGallery() {\n  document.getElementById('gallery').innerHTML = '';\n}\n\nfunction renderImages(data) {\n  const gallery = document.getElementById('gallery');\n\n  if (data.total === 0) {\n    handleError('Нічого не знайдено. Спробуй інше слово.');\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n\n  data.hits.forEach(img => {\n    const card = document.createElement('li');\n    card.className = 'gallery-item';\n\n    card.innerHTML = `\n      <a href=\"${img.largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" class=\"gallery-image\" />\n      </a>\n      <div class=\"gallery-info\">\n        <p><b>Likes:</b> ${img.likes}</p>\n        <p><b>Views:</b> ${img.views}</p>\n        <p><b>Comments:</b> ${img.comments}</p>\n        <p><b>Downloads:</b> ${img.downloads}</p>\n      </div>\n    `;\n\n    fragment.appendChild(card);\n  });\n\n  gallery.appendChild(fragment);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a');\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport { renderImages, handleError, clearGallery };\n","import axios from 'axios';\nimport { handleError } from './render-functions';\n\nconst API_KEY = '49574533-99195dbfc8ece3e2fce047715';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst PARAMS = {\n  key: API_KEY,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n};\n\nlet page = 1;\nconst perPage = 15;\n\nfunction resetPage() {\n  page = 1;\n}\n\nfunction nextPage() {\n  page += 1;\n}\n\nasync function fetchImages(query) {\n  const loader = document.getElementById('loader');\n  loader.style.display = 'flex';\n\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: { ...PARAMS, q: query, page, per_page: perPage },\n    });\n    return response.data;\n  } catch (error) {\n    handleError('Щось пішло не так 😢');\n    throw error;\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nexport { fetchImages, resetPage, nextPage };\n","import { fetchImages, resetPage, nextPage } from './js/pixabay-api.js';\nimport { renderImages, clearGallery, handleError } from './js/render-functions.js';\n\nconst form = document.getElementById('searchForm');\nconst input = document.getElementById('searchInput');\nconst gallery = document.getElementById('gallery');\n\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.textContent = 'Load more';\nloadMoreBtn.className = 'load-more-btn';\nloadMoreBtn.style.display = 'none';\ngallery.after(loadMoreBtn);\n\nlet searchQuery = '';\nlet totalImages = 0;\nlet shownImages = 0;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  const query = input.value.trim();\n  if (!query) return;\n\n  searchQuery = query;\n  resetPage();\n  clearGallery();\n  loadMoreBtn.style.display = 'none';\n\n  try {\n    const data = await fetchImages(searchQuery);\n    totalImages = data.totalHits;\n    shownImages = data.hits.length;\n\n    renderImages(data);\n\n    if (shownImages < totalImages) {\n      loadMoreBtn.style.display = 'block';\n    } else {\n      handleError(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    console.log(error);\n  }\n\n  input.value = '';\n  input.blur();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  nextPage();\n\n  try {\n    const data = await fetchImages(searchQuery);\n    shownImages += data.hits.length;\n    renderImages(data);\n\n    scrollSmoothly();\n\n    if (shownImages >= totalImages) {\n      loadMoreBtn.style.display = 'none';\n      handleError(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    console.log(error);\n  }\n});\n\nfunction scrollSmoothly() {\n  const card = document.querySelector('.gallery-item');\n  if (card) {\n    const cardHeight = card.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["lightbox","handleError","message","iziToast","clearGallery","renderImages","data","gallery","fragment","img","card","SimpleLightbox","API_KEY","BASE_URL","PARAMS","page","perPage","resetPage","nextPage","fetchImages","query","loader","axios","error","form","input","loadMoreBtn","searchQuery","totalImages","shownImages","event","scrollSmoothly","cardHeight"],"mappings":"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"}